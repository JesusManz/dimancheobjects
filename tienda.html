<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png">
    <meta property="og:title" content="DIMANCHE">
    <meta property="og:image" content="favicon.png">
    <meta property="og:description" content="DIMANCHE OBJECTS">
    <meta property="og:url" content="https://dimancheobjects.com">
    <link rel="stylesheet" href="styleshop.css">
    <title>tienda</title>
    <style>

    </style>


</head>

  <header>

      <div class="container-header">
        <a href="/"><img class="header-picture" src="imagen/logo_dimanche.svg" alt="LOGO"></a>
        <h1>DIMANCHE OBJECTS AKA LA TIENDITA DE LOS OBJETOS CON ESTILO</h1>
      </div>

  </header>
  <div class="menu-header">
     <div class="menu">
      <ul class="lista-menu">
        <li><a href="/tienda">TIENDA</a></li>
        <li><a href="/vendidos">VENDIDOS</a></li>
        <li><a href="/blog">BLOG</a></li>
        <li><a href="/about">ABOUT</a></li>
        <li><a href="https://www.instagram.com/dimancheobjects" target="_blank" rel="noopener noreferrer">IG</a></li>
      </ul>
    </div>
    </div>
  <div class="cont-circle">
    <div class="semicircle"></div>
            </div>
  <body>
   <div class="container">
  <h2>[ <a href="/vendidos">Ver objetos vendidos</a> ]</h2>

  <div id="toggle-filtros" onclick="toggleFiltros()" style="cursor:pointer;">
    Filtrar objetos ▾
  </div>

  <!-- CONTENEDOR GENERAL DE FILTROS -->
  <div id="filters-container" style="display:none;">

    <!-- Bloque 1: Filtros por categoría -->
    <div id="filters-palabras" class="filters-palabras">
      <button onclick="filtrarCategoria('all')">TODOS</button>
      <button onclick="filtrarCategoria('decoracion')">DECORACIÓN</button>
      <button onclick="filtrarCategoria('iluminacion')">ILUMINACIÓN</button>
      <button onclick="filtrarCategoria('almacenaje')">ALMACENAJE</button>
      <button onclick="filtrarCategoria('herramienta')">HERRAMIENTA</button>
      <button onclick="filtrarCategoria('mueble')">MUEBLE</button>
      <button onclick="filtrarCategoria('textil')">TEXTIL</button>
      <button onclick="filtrarCategoria('vintage')">VINTAGE</button>
      <button onclick="filtrarCategoria('diseno')">DISEÑO</button>
      <button onclick="filtrarCategoria('raro')">RARO</button>
      <button onclick="filtrarCategoria('print')">PRINT</button>
      <button onclick="filtrarCategoria('outdoor')">OUTDOOR</button>
      <button onclick="filtrarCategoria('oficina')">OFICINA</button>
      <button onclick="filtrarCategoria('cocina')">COCINA</button>
      <button onclick="filtrarCategoria('dormitorio')">DORMITORIO</button>
      <button onclick="filtrarCategoria('bano')">BAÑO</button>
      <button onclick="filtrarCategoria('salon')">SALÓN</button>
    </div>

    <!-- Bloque 2: Filtros por precio -->
    <div id="filters-precio" class="filters-precio">
      <label>
        <span>PRECIO MÍN:</span>
        <input type="number" id="filtro-precio-min" value="0" oninput="filtrarPrecio()">
      </label>

      <label>
        <span>PRECIO MÁX:</span>
        <input type="number" id="filtro-precio-max" value="0" oninput="filtrarPrecio()">
      </label>
    </div>

  </div>



      <div class="header-text">

        <h2>OBJETOS DISPONIBLES</h2>
        <hr color="red" size="2px" align="center" />
        </div>

        <div id="productos" class="columns"></div>
        
    
    </div>
  
    <div class="header-text" style="margin-top: 50px; margin-bottom: 70px;">
      <h2>Si lo que has visto no es suficiente pues solo podemos decirte esto:</h2>
      <img class="footer-picture" src="cartel.png" alt="cartel">
      <h2>Objetos nuevos todos los domingos.</h2>
    </div>

  </div>

  <div style="display: none;"><!--change to display:block to show pop up!!!-->
  <div id="popup" class="popup">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup()">&times;</span>
      <img src="compressed/regalo45.JPG" alt="">
      <p>¡ESTA LÁMPARA, DE REGALO!</p>
      <p>Incluiremos esta lámpara regulable de los años 80 con el primer pedido que supere 45€. No importa que sea en un solo artículo o en un lote. </p>
      <p>¿Vas a ser el primero?</p>
    </div>
  </div>
  </div>
  
  


<script>
function myFunction() {
  var x = document.getElementsByClassName("column-picturev").length;
  document.getElementById("demo").innerHTML = "Actualmente hemos vendido " + (x) + " objetos.";
}

function updateSemicircles() {
      const container = document.querySelector('.cont-circle');
      container.innerHTML = ''; // Clear any existing semicircles

      const screenWidth = window.innerWidth; // Get current screen width
      const semiHeight = container.offsetHeight || 50; // Use height from CSS or default
      const semiWidth = semiHeight * 2; // Ensure semicircles are perfectly round

      const numCircles = Math.ceil(screenWidth / semiWidth); // Calculate exact number of semicircles

      // Add the required number of semicircles
      for (let i = 0; i < numCircles; i++) {
          const semicircle = document.createElement('div');
          semicircle.classList.add('semicircle');
          semicircle.style.width = `${semiWidth}px`;
          semicircle.style.height = `${semiHeight}px`;
          container.appendChild(semicircle);
      }
  }

  // Call the function on load and resize
  updateSemicircles();
  window.addEventListener('resize', updateSemicircles);

 
  window.onload = function () {
    if (!sessionStorage.getItem("popupClosed")) {
      document.getElementById("popup").style.display = "flex";
    }
  };

  function closePopup() {
    document.getElementById("popup").style.display = "none";
    sessionStorage.setItem("popupClosed", "true");
  }

let productos = [];

fetch('productos.json')
  .then(res => res.json())
  .then(data => {
    productos = data;
    renderProductos(productos);
  });


function renderProductos(lista) {
  const container = document.getElementById('productos');
  container.innerHTML = "";

  lista.forEach(p => {
    container.innerHTML += `
      <div class="column"
           data-categorias="${p.categorias.join(" ")}"
           data-precio="${p.precio}"
           data-precio-descuento="${p.precio_descuento}">
 <a href="/${p.id}">
  <img class="column-picture" src="${p.imagen}" alt="${p.nombre}">
</a>
<a class="one" href="${p.id}">${p.nombre}</a>
        <div class="precio-container">
          ${
            p.precio_descuento
              ? `<span class="precio-original">${p.precio}€</span> <span class="precio-descuento">${p.precio_descuento}€</span>`
              : `<span class="precio">${p.precio}€</span>`
          }
        </div>
      </div>
    `;
  });
}



// Filtro por categoría
function filtrarCategoria(cat) {
  let filtrados;
  if (cat === "all") {
    filtrados = productos;
  } else {
    filtrados = productos.filter(p => p.categorias.includes(cat));
  }
  renderProductos(filtrados);
}

// Filtro por precio
function filtrarPrecio() {
  const min = parseFloat(document.getElementById('filtro-precio-min').value) || 0;
  const max = parseFloat(document.getElementById('filtro-precio-max').value) || Infinity;

  const filtrados = productos.filter(p => {
    const precio = p.precio_descuento || p.precio;
    return precio >= min && precio <= max;
  });

  renderProductos(filtrados);
}

function toggleFiltros() {
  const filtros = document.getElementById('filters-container');
  const toggleBtn = document.getElementById('toggle-filtros');

  const abierto = filtros.style.display === "flex";

  if (abierto) {
    filtros.style.display = "none";
    toggleBtn.textContent = "Filtrar objetos ▾"; // cerrado
  } else {
    filtros.style.display = "flex";
    toggleBtn.textContent = "Ocultar filtros ×"; // abierto
  }
}



</script>


</body>
</html>
